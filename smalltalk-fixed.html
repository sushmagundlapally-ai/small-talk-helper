<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmallTalk - Fixed Version</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>üí¨ SmallTalk</h1>
            <p class="tagline">Never run out of things to say</p>
        </div>
    </header>

    <main class="container">
        <!-- Daily Tech Highlights Section -->
        <section class="section" id="tech-highlights">
            <div class="section-header">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; width: 100%;">
                    <div>
                        <h2>üöÄ Tech Highlights This Week</h2>
                        <p class="section-description">Fresh topics updated daily to keep you in the loop</p>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button onclick="refreshNews()" class="refresh-btn" id="refreshBtn" style="padding: 0.5rem 1rem; background: #3498db; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9rem;">üîÑ Refresh News</button>
                        <div class="date-badge" id="currentDate"></div>
                    </div>
                </div>
            </div>
            <div id="techNewsCards" class="cards-grid">
                <!-- News will load here -->
            </div>
        </section>

        <!-- Meeting Topic Research Section -->
        <section class="section" id="meeting-research">
            <div class="section-header">
                <h2>üéØ Meeting Topic Research</h2>
                <p class="section-description">Get conversation starters based on your meeting topic</p>
            </div>
            <div class="input-container">
                <input 
                    type="text" 
                    id="meetingTopic" 
                    placeholder="Enter meeting topic (e.g., Machine Learning, Cloud Computing)"
                    class="topic-input"
                />
                <button class="search-btn" onclick="searchMeetingTopic()">Search</button>
            </div>
            <div id="topicResults" class="results-container"></div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>SmallTalk - Making conversations easier üíô</p>
        </div>
    </footer>

    <script>
    // Display date
    function displayDate() {
        const dateEl = document.getElementById('currentDate');
        const today = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        dateEl.textContent = `üìÖ ${today.toLocaleDateString('en-US', options)}`;
    }

    // Get demo news
    function getDemoNews() {
        const today = new Date().toLocaleDateString();
        return [
            {
                title: "AI Breakthrough: New Language Model Achieves Human-Level Reasoning",
                description: "Researchers unveil a groundbreaking AI system that demonstrates unprecedented reasoning capabilities.",
                source: "Tech Insider",
                url: "https://news.ycombinator.com/",
                date: today
            },
            {
                title: "Quantum Computing Reaches New Milestone with 1000-Qubit Processor",
                description: "Major tech company announces successful development of a 1000-qubit quantum processor.",
                source: "Science Daily",
                url: "https://www.sciencedaily.com/news/computers_math/quantum_computers/",
                date: today
            },
            {
                title: "Sustainable Tech: Solar Panels Now 50% More Efficient",
                description: "Breakthrough in photovoltaic technology promises to dramatically reduce the cost of solar energy.",
                source: "Green Tech News",
                url: "https://techcrunch.com/category/green/",
                date: today
            },
            {
                title: "New Programming Language Simplifies Concurrent Computing",
                description: "Developers release innovative language that makes parallel programming accessible to mainstream developers.",
                source: "Dev Community",
                url: "https://dev.to/",
                date: today
            },
            {
                title: "Breakthrough in Edge Computing Enables Real-Time AI on Devices",
                description: "New chip architecture allows complex AI models to run directly on smartphones and IoT devices.",
                source: "Hardware Weekly",
                url: "https://www.theverge.com/tech",
                date: today
            },
            {
                title: "Open Source Project Hits 1 Million Contributors Worldwide",
                description: "Popular open-source initiative celebrates milestone with contributors from every country.",
                source: "Open Source Daily",
                url: "https://github.com/trending",
                date: today
            }
        ];
    }

    // Display news
    function displayNews(articles) {
        const container = document.getElementById('techNewsCards');
        container.innerHTML = articles.map(article => `
            <div class="news-card" onclick="window.open('${article.url}', '_blank')" style="cursor: pointer;">
                <h3>${article.title}</h3>
                <p>${article.description}</p>
                <div class="news-meta">
                    <span class="news-source">${article.source}</span>
                    <span class="news-date">${article.date}</span>
                </div>
                <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #3498db;">üîó Click to read more</div>
            </div>
        `).join('');
    }

    // Refresh news - fetch live headlines from multiple sources
    async function refreshNews() {
        const btn = document.getElementById('refreshBtn');
        const container = document.getElementById('techNewsCards');
        
        btn.textContent = '‚è≥ Loading...';
        btn.disabled = true;
        container.innerHTML = '<div style="text-align: center; padding: 2rem; color: #666;">üì° Fetching live headlines...</div>';
        
        const articles = [];
        
        try {
            // Fetch from Hacker News (top stories)
            const hnResponse = await fetch('https://hacker-news.firebaseio.com/v0/topstories.json');
            const storyIds = await hnResponse.json();
            
            // Get top 4 from Hacker News
            for (let i = 0; i < 4 && i < storyIds.length; i++) {
                const storyResponse = await fetch(`https://hacker-news.firebaseio.com/v0/item/${storyIds[i]}.json`);
                const story = await storyResponse.json();
                
                if (story && story.title) {
                    articles.push({
                        title: story.title,
                        description: `üî• ${story.score} points ‚Ä¢ ${story.descendants || 0} comments`,
                        source: 'Hacker News',
                        url: story.url || `https://news.ycombinator.com/item?id=${story.id}`,
                        date: new Date(story.time * 1000).toLocaleDateString()
                    });
                }
            }
            
            // Fetch from Reddit r/technology
            try {
                const redditResponse = await fetch('https://www.reddit.com/r/technology/hot.json?limit=3');
                const redditData = await redditResponse.json();
                
                if (redditData.data && redditData.data.children) {
                    redditData.data.children.slice(0, 2).forEach(post => {
                        const p = post.data;
                        if (!p.stickied && p.title) {
                            articles.push({
                                title: p.title,
                                description: `‚¨ÜÔ∏è ${p.ups} upvotes ‚Ä¢ ${p.num_comments} comments`,
                                source: 'Reddit r/technology',
                                url: p.url.startsWith('http') ? p.url : `https://reddit.com${p.permalink}`,
                                date: new Date(p.created_utc * 1000).toLocaleDateString()
                            });
                        }
                    });
                }
            } catch (e) { console.log('Reddit fetch failed, continuing...'); }
            
            if (articles.length > 0) {
                displayNews(articles);
                btn.textContent = '‚úÖ ' + articles.length + ' Headlines!';
                setTimeout(() => { btn.textContent = 'üîÑ Refresh News'; }, 2000);
            } else {
                throw new Error('No articles fetched');
            }
        } catch (error) {
            console.error('Error fetching news:', error);
            displayNews(getDemoNews());
            btn.textContent = '‚ö†Ô∏è Using Demo';
            setTimeout(() => { btn.textContent = 'üîÑ Refresh News'; }, 2000);
        }
        
        btn.disabled = false;
    }

    // Search meeting topic
    function searchMeetingTopic() {
        const topic = document.getElementById('meetingTopic').value.trim();
        const results = document.getElementById('topicResults');
        
        if (!topic) {
            results.innerHTML = '<div class="error">Please enter a topic</div>';
            return;
        }
        
        results.innerHTML = `
            <div class="result-card">
                <h3>üí° Research "${topic}"</h3>
                <p>Here are some conversation starters:</p>
                <ul>
                    <li>What's your experience with ${topic}?</li>
                    <li>What are the biggest challenges in ${topic} right now?</li>
                    <li>What innovations in ${topic} are you most excited about?</li>
                </ul>
            </div>
        `;
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Page loading...');
        displayDate();
        displayNews(getDemoNews());
        console.log('Page loaded successfully!');
    });
    </script>
</body>
</html>

